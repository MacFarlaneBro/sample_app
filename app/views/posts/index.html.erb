<h1> The SIPP Blog </h1>
<h2> by Douglas Brodie </h2>
<div class="center hero-unit">
  <table>
    <% if signed_in? && current_user.admin? %>
      <thead>
	<tr>
	  <th>Post</th>
	  <th></th>
	  <th>Date</th>
	  <th></th>
	  <th></th>
	  <th></th>
	</tr>
      </thead>

      <tbody>
	<% @posts.each do |post| %>
	  <tr>
            <td><strong><%= post.title %></strong></td>
            <td><%= truncate(post.content, length: 100) %></td>
	    <td><%= post.created_at.to_formatted_s(:short) %></td>
            <td><%= link_to 'Show', post %>|</td>
            <td><%= link_to 'Edit', edit_post_path(post) %>|</td>
            <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
	  </tr>
	<% end %>
      </tbody>
    <% else  %>
      <thead>
	<tr>
	  <th>Post</th>
	  <th></th>
	  <th>Date Published</th>
	  <th></th>
	  <th></th>
	  <th></th>
	</tr>
      </thead>

      <tbody>
	<% @posts.each do |post| %>
	  <tr>
            <td><strong><%= link_to "#{post.title}", post %></strong></td>
            <td><%= truncate(post.content, :length => 80) %> | </td>
	    <td><%= post.created_at.to_formatted_s(:short) %></td>
	  </tr>
	<% end %>
      </tbody>
      <% end %>
  </table>
  <br>
  <% if signed_in? && current_user.admin? %>
    <%= link_to 'New Post', new_post_path %>
  <% end %>
</div>
